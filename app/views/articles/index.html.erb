<div class="min-h-screen bg-gradient-to-br from-primary/5 via-surface to-secondary/5 py-8 px-4">
  <div 
    class="container-lg mx-auto max-w-4xl"
    data-controller="articles" 
    data-articles-stream-name-value="<%= @stream_name %>"
  >
    <!-- Header -->
    <div class="mb-8">
      <!-- Credits Banner -->
      <% if current_user %>
        <div class="card card-elevated p-4 mb-6 bg-gradient-to-r from-primary/10 via-secondary/10 to-primary/10">
          <div class="flex items-center justify-between flex-wrap gap-4">
            <div class="flex items-center gap-4">
              <%= lucide_icon "file-text", class: "w-8 h-8 text-primary" %>
              <div>
                <div class="flex items-baseline gap-2">
                  <span class="text-3xl font-bold text-primary"><%= current_user.credits %></span>
                  <span class="text-sm text-secondary">篇文章配额</span>
                </div>
                <p class="text-xs text-muted mt-1">
                  <% if current_user.credits > 0 %>
                    可继续创作 <%= current_user.credits %> 篇文章
                  <% else %>
                    配额已用完，请购买套餐后继续创作
                  <% end %>
                </p>
              </div>
            </div>
            <div class="flex items-center gap-3">
              <%= link_to packages_path, class: "btn-primary btn-sm" do %>
                <%= lucide_icon "shopping-cart", class: "w-4 h-4 inline-block mr-1" %>
                购买套餐
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
      
      <div class="text-center mb-3 lg:relative">
        <h1 class="text-4xl lg:text-5xl font-bold text-primary mb-4 lg:mb-0">
          最小阻力写作
        </h1>
        <!-- Desktop: buttons on title row -->
        <div class="hidden lg:flex lg:absolute lg:right-0 lg:top-0 gap-3">
          <% if params[:article_id].present? %>
            <%= link_to root_path, class: "btn-secondary" do %>
              <%= lucide_icon "arrow-left", class: "w-5 h-5 inline-block mr-2" %>
              返回主页
            <% end %>
          <% end %>
          <button
            type="button"
            data-action="click->articles#openHistory"
            class="btn-secondary"
          >
            <%= lucide_icon "history", class: "w-5 h-5 inline-block mr-2" %>
            历史文章
          </button>
        </div>

      <p class="text-lg text-secondary text-center mb-4">
        能说就能写，写出影响力
      </p>
      <!-- Mobile: buttons below subtitle -->
      <div class="flex justify-center gap-3 lg:hidden">
        <% if params[:article_id].present? %>
          <%= link_to root_path, class: "btn-secondary" do %>
            <%= lucide_icon "arrow-left", class: "w-5 h-5 inline-block mr-2" %>
            返回主页
          <% end %>
        <% end %>
        <button
          type="button"
          data-action="click->articles#openHistory"
          class="btn-secondary"
        >
          <%= lucide_icon "history", class: "w-5 h-5 inline-block mr-2" %>
          历史文章
        </button>
      </div>
    </div>

    <!-- Main Content Wrapper -->
    <div
    >
      
      <!-- Step 1: Input Section -->
      <h2 class="text-2xl font-bold text-primary mb-4 flex items-center gap-2">
        <div class="w-1 h-6 bg-orange-500"></div>
        步骤 1：输入你的想法
      </h2>
      
      <div class="card card-elevated p-6 mb-6 rounded-none">
        <div class="mb-4">
          <label class="block text-lg font-semibold text-primary mb-3 flex items-center gap-2">
            <%= lucide_icon "message-square", class: "w-6 h-6" %>
            想法输入
          </label>
          <textarea
            data-articles-target="inputText"
            data-action="input->articles#updateCharCount"
            class="w-full px-4 py-3 text-lg border-2 border-border rounded-none focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all resize-none text-foreground bg-surface"
            rows="8"
            placeholder="💡 建议使用语音输入法（推荐豆包语音输入法）

在手机上说出来、讲出来：
• 你的感受和思考
• 你的思路和观点  
• 读后感和心得
• 个人经历和故事

能说就能写，让表达更自然"
          ></textarea>
          <div class="mt-2 text-right">
            <span class="text-sm text-muted">
              字数：<span data-articles-target="charCount" class="font-semibold text-primary">0</span>
            </span>
          </div>
          
          <!-- Writing Tips Banner -->
          <%= render 'shared/writing_tip_banner' %>
        </div>
        
        <!-- Thinking Framework Selection -->
        <div class="mb-6">
          <label class="block text-lg font-semibold text-primary mb-3">
            <%= lucide_icon "brain-circuit", class: "w-5 h-5 inline-block mr-2" %>
            决策框架
          </label>
          
          <div class="grid grid-cols-2 gap-3">
            <!-- 原汁原味 (可用) -->
            <label class="relative cursor-pointer">
              <input
                type="radio"
                name="thinking_framework"
                value="original"
                data-articles-target="thinkingFramework"
                class="peer sr-only"
                checked
              />
              <div class="px-4 py-2.5 border-2 rounded-none transition-all peer-checked:border-primary peer-checked:bg-primary/10 peer-checked:shadow-md border-border bg-surface hover:border-primary/50">
                <span class="text-base font-medium text-foreground">原汁原味</span>
              </div>
            </label>

            <!-- 最小化读者脑力消耗 (可用) -->
            <label class="relative cursor-pointer">
              <input
                type="radio"
                name="thinking_framework"
                value="minimal_reader_load"
                data-articles-target="thinkingFramework"
                class="peer sr-only"
              />
              <div class="px-4 py-2.5 border-2 rounded-none transition-all peer-checked:border-primary peer-checked:bg-primary/10 peer-checked:shadow-md border-border bg-surface hover:border-primary/50">
                <span class="text-base font-medium text-foreground">最小化读者脑力消耗</span>
              </div>
            </label>

            <!-- OmniThink写作引擎 (可用) -->
            <label class="relative cursor-pointer">
              <input
                type="radio"
                name="thinking_framework"
                value="omnithink"
                data-articles-target="thinkingFramework"
                class="peer sr-only"
              />
              <div class="px-4 py-2.5 border-2 rounded-none transition-all peer-checked:border-primary peer-checked:bg-primary/10 peer-checked:shadow-md border-border bg-surface hover:border-primary/50">
                <span class="text-base font-medium text-foreground">OmniThink写作引擎</span>
              </div>
            </label>

            <!-- 咪蒙式NLP情绪操控框架 (可用) -->
            <label class="relative cursor-pointer">
              <input
                type="radio"
                name="thinking_framework"
                value="mimeng_nlp"
                data-articles-target="thinkingFramework"
                class="peer sr-only"
              />
              <div class="px-4 py-2.5 border-2 rounded-none transition-all peer-checked:border-primary peer-checked:bg-primary/10 peer-checked:shadow-md border-border bg-surface hover:border-primary/50">
                <span class="text-base font-medium text-foreground">咪蒙式NLP情绪操控框架</span>
              </div>
            </label>

            <!-- 第一性原理暴力拆解 (可用) -->
            <label class="relative cursor-pointer">
              <input
                type="radio"
                name="thinking_framework"
                value="first_principles"
                data-articles-target="thinkingFramework"
                class="peer sr-only"
              />
              <div class="px-4 py-2.5 border-2 rounded-none transition-all peer-checked:border-primary peer-checked:bg-primary/10 peer-checked:shadow-md border-border bg-surface hover:border-primary/50">
                <span class="text-base font-medium text-foreground">第一性原理暴力拆解</span>
              </div>
            </label>

            <!-- 快速决策与破局 (可用) -->
            <label class="relative cursor-pointer">
              <input
                type="radio"
                name="thinking_framework"
                value="rapid_decision"
                data-articles-target="thinkingFramework"
                class="peer sr-only"
              />
              <div class="px-4 py-2.5 border-2 rounded-none transition-all peer-checked:border-primary peer-checked:bg-primary/10 peer-checked:shadow-md border-border bg-surface hover:border-primary/50">
                <span class="text-base font-medium text-foreground">快速决策与破局</span>
              </div>
            </label>

            <!-- 贝索斯6页叙事备忘录 (可用) -->
            <label class="relative cursor-pointer">
              <input
                type="radio"
                name="thinking_framework"
                value="bezos_memo"
                data-articles-target="thinkingFramework"
                class="peer sr-only"
              />
              <div class="px-4 py-2.5 border-2 rounded-none transition-all peer-checked:border-primary peer-checked:bg-primary/10 peer-checked:shadow-md border-border bg-surface hover:border-primary/50">
                <span class="text-base font-medium text-foreground">贝索斯6页叙事备忘录</span>
              </div>
            </label>

            <!-- 遗憾最小化框架 (可用) -->
            <label class="relative cursor-pointer">
              <input
                type="radio"
                name="thinking_framework"
                value="regret_minimization"
                data-articles-target="thinkingFramework"
                class="peer sr-only"
              />
              <div class="px-4 py-2.5 border-2 rounded-none transition-all peer-checked:border-primary peer-checked:bg-primary/10 peer-checked:shadow-md border-border bg-surface hover:border-primary/50">
                <span class="text-base font-medium text-foreground">遗憾最小化框架</span>
              </div>
            </label>

            <!-- 系统思考 (可用) -->
            <label class="relative cursor-pointer">
              <input
                type="radio"
                name="thinking_framework"
                value="systems_thinking"
                data-articles-target="thinkingFramework"
                class="peer sr-only"
              />
              <div class="px-4 py-2.5 border-2 rounded-none transition-all peer-checked:border-primary peer-checked:bg-primary/10 peer-checked:shadow-md border-border bg-surface hover:border-primary/50">
                <span class="text-base font-medium text-foreground">系统思考</span>
              </div>
            </label>
          </div>
        </div>
        
        <!-- Writing Style Selection -->
        <div class="mb-6">
          <label class="block text-lg font-semibold text-primary mb-3">
            <%= lucide_icon "pen-tool", class: "w-5 h-5 inline-block mr-2" %>
            写作风格
          </label>
          
          <div class="grid grid-cols-1 gap-3">
            <!-- Original Style -->
            <label class="relative cursor-pointer">
              <input
                type="radio"
                name="writing_style"
                value="original"
                checked
                data-articles-target="writingStyleRadio"
                data-action="change->articles#updateWritingStyle"
                class="peer sr-only"
              />
              <div class="px-4 py-3 border-2 rounded-none transition-all peer-checked:border-primary peer-checked:bg-primary/10 peer-checked:shadow-md border-border bg-surface hover:border-primary/50">
                <div class="font-semibold text-foreground mb-1">原始风格</div>
                <div class="text-sm text-muted">使用系统默认的口语化、线性表达风格</div>
              </div>
            </label>
            
            <!-- Luo Zhenyu Style -->
            <label class="relative cursor-pointer">
              <input
                type="radio"
                name="writing_style"
                value="luo_style"
                data-articles-target="writingStyleRadio"
                data-action="change->articles#updateWritingStyle"
                class="peer sr-only"
              />
              <div class="px-4 py-3 border-2 rounded-none transition-all peer-checked:border-primary peer-checked:bg-primary/10 peer-checked:shadow-md border-border bg-surface hover:border-primary/50">
                <div class="font-semibold text-foreground mb-1">罗振宇口语化表达风格</div>
                <div class="text-sm text-muted">基于对象化思维和线性交付的自然语言表达，适合深度知识传递</div>
              </div>
            </label>
          </div>
        </div>
        
        <div class="text-center">
          <button
            type="button"
            data-action="click->articles#generateArticle"
            class="btn-primary btn-lg px-12"
          >
            <%= lucide_icon "zap", class: "w-5 h-5 inline-block mr-2" %>
            一键生成所有脑爆和初稿
          </button>
        </div>

        <!-- Progress Bars for 5 Models -->
        <div data-articles-target="progressContainer" class="mt-8" style="display: none;">
          <h3 class="text-lg font-semibold text-primary mb-4 text-center">生成进度</h3>
          
          <!-- Grok Progress -->
          <div class="mb-4">
            <div class="flex items-center justify-between mb-2">
              <div class="flex items-center gap-2">
                <%= image_tag "grok-logo.png", class: "w-4 h-4", alt: "Grok" %>
                <span class="text-sm font-medium text-foreground">Grok</span>
              </div>
              <span data-articles-target="progressTextGrok" class="text-sm font-semibold text-primary">0%</span>
            </div>
            <div class="w-full h-2 bg-surface border border-border rounded-full overflow-hidden">
              <div 
                data-articles-target="progressBarGrok" 
                class="h-full bg-gradient-to-r from-orange-500 to-red-500 transition-all duration-300 ease-out"
                style="width: 0%"
              ></div>
            </div>
          </div>

          <!-- Qwen Progress -->
          <div class="mb-4">
            <div class="flex items-center justify-between mb-2">
              <div class="flex items-center gap-2">
                <%= image_tag "qwen-logo.png", class: "w-4 h-4", alt: "千问" %>
                <span class="text-sm font-medium text-foreground">千问</span>
              </div>
              <span data-articles-target="progressTextQwen" class="text-sm font-semibold text-primary">0%</span>
            </div>
            <div class="w-full h-2 bg-surface border border-border rounded-full overflow-hidden">
              <div 
                data-articles-target="progressBarQwen" 
                class="h-full bg-gradient-to-r from-purple-500 to-blue-500 transition-all duration-300 ease-out"
                style="width: 0%"
              ></div>
            </div>
          </div>

          <!-- DeepSeek Progress -->
          <div class="mb-4">
            <div class="flex items-center justify-between mb-2">
              <div class="flex items-center gap-2">
                <%= image_tag "deepseek-logo.png", class: "w-4 h-4", alt: "DeepSeek" %>
                <span class="text-sm font-medium text-foreground">DeepSeek</span>
              </div>
              <span data-articles-target="progressTextDeepseek" class="text-sm font-semibold text-primary">0%</span>
            </div>
            <div class="w-full h-2 bg-surface border border-border rounded-full overflow-hidden">
              <div 
                data-articles-target="progressBarDeepseek" 
                class="h-full bg-gradient-to-r from-cyan-500 to-blue-500 transition-all duration-300 ease-out"
                style="width: 0%"
              ></div>
            </div>
          </div>

          <!-- Gemini Progress -->
          <div class="mb-4">
            <div class="flex items-center justify-between mb-2">
              <div class="flex items-center gap-2">
                <%= image_tag "gemini-logo.png", class: "w-4 h-4", alt: "Gemini" %>
                <span class="text-sm font-medium text-foreground">Gemini</span>
              </div>
              <span data-articles-target="progressTextGemini" class="text-sm font-semibold text-primary">0%</span>
            </div>
            <div class="w-full h-2 bg-surface border border-border rounded-full overflow-hidden">
              <div 
                data-articles-target="progressBarGemini" 
                class="h-full bg-gradient-to-r from-blue-500 to-indigo-500 transition-all duration-300 ease-out"
                style="width: 0%"
              ></div>
            </div>
          </div>

          <!-- Doubao Progress -->
          <div class="mb-4">
            <div class="flex items-center justify-between mb-2">
              <div class="flex items-center gap-2">
                <%= image_tag "doubao-logo.png", class: "w-4 h-4", alt: "豆包" %>
                <span class="text-sm font-medium text-foreground">豆包</span>
              </div>
              <span data-articles-target="progressTextDoubao" class="text-sm font-semibold text-primary">0%</span>
            </div>
            <div class="w-full h-2 bg-surface border border-border rounded-full overflow-hidden">
              <div 
                data-articles-target="progressBarDoubao" 
                class="h-full bg-gradient-to-r from-green-500 to-teal-500 transition-all duration-300 ease-out"
                style="width: 0%"
              ></div>
            </div>
          </div>
        </div>

      </div>

      <!-- Step 2: Multi-Model Response Section -->
      <div data-articles-target="responsesContainer" style="display: none;">
        <h2 class="text-2xl font-bold text-primary mb-4 flex items-center gap-2">
          <div class="w-1 h-6 bg-orange-500"></div>
          步骤 2：AI 模型回应
        </h2>
        
        <!-- Grok Response -->
        <div class="card card-elevated mb-4 bg-gradient-to-br from-orange-500/5 to-red-500/5 rounded-none">
          <div class="card-header border-b border-border flex items-center justify-between rounded-none">
            <h3 class="text-lg font-bold text-primary flex items-center gap-2">
              <%= image_tag "grok-logo.png", class: "w-5 h-5", alt: "Grok" %>
              Grok
              <span class="text-sm font-normal text-muted">grok-4-1-fast-reasoning</span>
            </h3>
            <div class="flex gap-2">
              <button
                type="button"
                data-action="click->articles#saveResponse"
                data-provider="grok"
                data-articles-target="saveButtonGrok"
                class="btn-success btn-sm"
                style="display: none;"
              >
                <%= lucide_icon "save", class: "w-4 h-4 inline-block mr-1" %>
                保存
              </button>
              <button
                type="button"
                data-action="click->articles#copyResponseHtml"
                data-provider="grok"
                data-articles-target="copyHtmlButtonGrok"
                class="btn-primary btn-sm"
                style="display: none;"
              >
                <%= lucide_icon "copy", class: "w-4 h-4 inline-block mr-1" %>
                复制
              </button>
              <button
                type="button"
                data-action="click->articles#copyResponseMarkdown"
                data-provider="grok"
                data-articles-target="copyMarkdownButtonGrok"
                class="btn-outline btn-sm"
                style="display: none;"
              >
                <%= lucide_icon "file-code", class: "w-4 h-4 inline-block mr-1" %>
                复制Markdown
              </button>

            </div>
          </div>
          <div class="card-body">
            <div 
              data-articles-target="responseGrok"
              class="text-secondary text-base leading-relaxed prose prose-sm max-w-none dark:prose-invert p-4 rounded-none min-h-[150px] max-h-[400px] overflow-y-auto"
            >
              <div class="flex items-center gap-2 text-muted">
                <div class="loading-spinner w-4 h-4"></div>
                <span>Grok 思考中...</span>
              </div>
            </div>
            <textarea
              data-articles-target="responseGrokEdit"
              class="w-full px-4 py-3 text-base border-2 border-border rounded-none focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all resize-none text-foreground bg-surface"
              rows="15"
              style="display: none;"
            ></textarea>
          </div>
        </div>

        <!-- Qwen Response -->
        <div class="card card-elevated mb-4 bg-gradient-to-br from-purple-500/5 to-blue-500/5 rounded-none">
          <div class="card-header border-b border-border flex items-center justify-between rounded-none">
            <h3 class="text-lg font-bold text-primary flex items-center gap-2">
              <%= image_tag "qwen-logo.png", class: "w-5 h-5", alt: "千问" %>
              千问
              <span class="text-sm font-normal text-muted">qwen3-max</span>
            </h3>
            <div class="flex gap-2">
              <button
                type="button"
                data-action="click->articles#saveResponse"
                data-provider="qwen"
                data-articles-target="saveButtonQwen"
                class="btn-success btn-sm"
                style="display: none;"
              >
                <%= lucide_icon "save", class: "w-4 h-4 inline-block mr-1" %>
                保存
              </button>
              <button
                type="button"
                data-action="click->articles#copyResponseHtml"
                data-provider="qwen"
                data-articles-target="copyHtmlButtonQwen"
                class="btn-primary btn-sm"
                style="display: none;"
              >
                <%= lucide_icon "copy", class: "w-4 h-4 inline-block mr-1" %>
                复制
              </button>
              <button
                type="button"
                data-action="click->articles#copyResponseMarkdown"
                data-provider="qwen"
                data-articles-target="copyMarkdownButtonQwen"
                class="btn-outline btn-sm"
                style="display: none;"
              >
                <%= lucide_icon "file-code", class: "w-4 h-4 inline-block mr-1" %>
                复制Markdown
              </button>

            </div>
          </div>
          <div class="card-body">
            <div 
              data-articles-target="responseQwen"
              class="text-secondary text-base leading-relaxed prose prose-sm max-w-none dark:prose-invert p-4 rounded-none min-h-[150px] max-h-[400px] overflow-y-auto"
            >
              <div class="flex items-center gap-2 text-muted">
                <div class="loading-spinner w-4 h-4"></div>
                <span>千问思考中...</span>
              </div>
            </div>
            <textarea
              data-articles-target="responseQwenEdit"
              class="w-full px-4 py-3 text-base border-2 border-border rounded-none focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all resize-none text-foreground bg-surface"
              rows="15"
              style="display: none;"
            ></textarea>
          </div>
        </div>

        <!-- DeepSeek Response -->
        <div class="card card-elevated mb-4 bg-gradient-to-br from-cyan-500/5 to-blue-500/5 rounded-none">
          <div class="card-header border-b border-border flex items-center justify-between rounded-none">
            <h3 class="text-lg font-bold text-primary flex items-center gap-2">
              <%= image_tag "deepseek-logo.png", class: "w-5 h-5", alt: "DeepSeek" %>
              DeepSeek
              <span class="text-sm font-normal text-muted">deepseek-reasoner</span>
            </h3>
            <div class="flex gap-2">
              <button
                type="button"
                data-action="click->articles#saveResponse"
                data-provider="deepseek"
                data-articles-target="saveButtonDeepseek"
                class="btn-success btn-sm"
                style="display: none;"
              >
                <%= lucide_icon "save", class: "w-4 h-4 inline-block mr-1" %>
                保存
              </button>
              <button
                type="button"
                data-action="click->articles#copyResponseHtml"
                data-provider="deepseek"
                data-articles-target="copyHtmlButtonDeepseek"
                class="btn-primary btn-sm"
                style="display: none;"
              >
                <%= lucide_icon "copy", class: "w-4 h-4 inline-block mr-1" %>
                复制
              </button>
              <button
                type="button"
                data-action="click->articles#copyResponseMarkdown"
                data-provider="deepseek"
                data-articles-target="copyMarkdownButtonDeepseek"
                class="btn-outline btn-sm"
                style="display: none;"
              >
                <%= lucide_icon "file-code", class: "w-4 h-4 inline-block mr-1" %>
                复制Markdown
              </button>

            </div>
          </div>
          <div class="card-body">
            <div 
              data-articles-target="responseDeepseek"
              class="text-secondary text-base leading-relaxed prose prose-sm max-w-none dark:prose-invert p-4 rounded-none min-h-[150px] max-h-[400px] overflow-y-auto"
            >
              <div class="flex items-center gap-2 text-muted">
                <div class="loading-spinner w-4 h-4"></div>
                <span>DeepSeek 思考中...</span>
              </div>
            </div>
            <textarea
              data-articles-target="responseDeepseekEdit"
              class="w-full px-4 py-3 text-base border-2 border-border rounded-none focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all resize-none text-foreground bg-surface"
              rows="15"
              style="display: none;"
            ></textarea>
          </div>
        </div>

        <!-- Gemini Response -->
        <div class="card card-elevated mb-4 bg-gradient-to-br from-blue-500/5 to-purple-500/5 rounded-none">
          <div class="card-header border-b border-border flex items-center justify-between rounded-none">
            <h3 class="text-lg font-bold text-primary flex items-center gap-2">
              <%= image_tag "gemini-logo.png", class: "w-5 h-5", alt: "Gemini" %>
              Gemini
              <span class="text-sm font-normal text-muted">gemini-3-flash-preview</span>
            </h3>
            <div class="flex gap-2">
              <button
                type="button"
                data-action="click->articles#saveResponse"
                data-provider="gemini"
                data-articles-target="saveButtonGemini"
                class="btn-success btn-sm"
                style="display: none;"
              >
                <%= lucide_icon "save", class: "w-4 h-4 inline-block mr-1" %>
                保存
              </button>
              <button
                type="button"
                data-action="click->articles#copyResponseHtml"
                data-provider="gemini"
                data-articles-target="copyHtmlButtonGemini"
                class="btn-primary btn-sm"
                style="display: none;"
              >
                <%= lucide_icon "copy", class: "w-4 h-4 inline-block mr-1" %>
                复制
              </button>
              <button
                type="button"
                data-action="click->articles#copyResponseMarkdown"
                data-provider="gemini"
                data-articles-target="copyMarkdownButtonGemini"
                class="btn-outline btn-sm"
                style="display: none;"
              >
                <%= lucide_icon "file-code", class: "w-4 h-4 inline-block mr-1" %>
                复制Markdown
              </button>

            </div>
          </div>
          <div class="card-body">
            <div 
              data-articles-target="responseGemini"
              class="text-secondary text-base leading-relaxed prose prose-sm max-w-none dark:prose-invert p-4 rounded-none min-h-[150px] max-h-[400px] overflow-y-auto"
            >
              <div class="flex items-center gap-2 text-muted">
                <div class="loading-spinner w-4 h-4"></div>
                <span>Gemini 思考中...</span>
              </div>
            </div>
            <textarea
              data-articles-target="responseGeminiEdit"
              class="w-full px-4 py-3 text-base border-2 border-border rounded-none focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all resize-none text-foreground bg-surface"
              rows="15"
              style="display: none;"
            ></textarea>
          </div>
        </div>

        <!-- Doubao Response -->
        <div class="card card-elevated mb-4 bg-gradient-to-br from-purple-500/5 to-pink-500/5 rounded-none">
          <div class="card-header border-b border-border flex items-center justify-between rounded-none">
            <h3 class="text-lg font-bold text-primary flex items-center gap-2">
              <%= image_tag "doubao-logo.png", class: "w-5 h-5", alt: "豆包" %>
              豆包
              <span class="text-sm font-normal text-muted">doubao-seed-1-6-flash-250828</span>
            </h3>
            <div class="flex gap-2">
              <button
                type="button"
                data-action="click->articles#saveResponse"
                data-provider="doubao"
                data-articles-target="saveButtonDoubao"
                class="btn-success btn-sm"
                style="display: none;"
              >
                <%= lucide_icon "save", class: "w-4 h-4 inline-block mr-1" %>
                保存
              </button>
              <button
                type="button"
                data-action="click->articles#copyResponseHtml"
                data-provider="doubao"
                data-articles-target="copyHtmlButtonDoubao"
                class="btn-primary btn-sm"
                style="display: none;"
              >
                <%= lucide_icon "copy", class: "w-4 h-4 inline-block mr-1" %>
                复制
              </button>
              <button
                type="button"
                data-action="click->articles#copyResponseMarkdown"
                data-provider="doubao"
                data-articles-target="copyMarkdownButtonDoubao"
                class="btn-outline btn-sm"
                style="display: none;"
              >
                <%= lucide_icon "file-code", class: "w-4 h-4 inline-block mr-1" %>
                复制Markdown
              </button>

            </div>
          </div>
          <div class="card-body">
            <div 
              data-articles-target="responseDoubao"
              class="text-secondary text-base leading-relaxed prose prose-sm max-w-none dark:prose-invert p-4 rounded-none min-h-[150px] max-h-[400px] overflow-y-auto"
            >
              <div class="flex items-center gap-2 text-muted">
                <div class="loading-spinner w-4 h-4"></div>
                <span>豆包思考中...</span>
              </div>
            </div>
            <textarea
              data-articles-target="responseDoubaoEdit"
              class="w-full px-4 py-3 text-base border-2 border-border rounded-none focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all resize-none text-foreground bg-surface"
              rows="15"
              style="display: none;"
            ></textarea>
          </div>
        </div>

        <!-- Doubao Response - HIDDEN -->
        <div class="card card-elevated mb-4 bg-gradient-to-br from-orange-500/5 to-red-500/5 rounded-none" style="display: none;">
          <div class="card-header border-b border-border flex items-center justify-between rounded-none">
            <h3 class="text-lg font-bold text-primary flex items-center gap-2">
              <%= lucide_icon "flame", class: "w-5 h-5 text-orange-600" %>
              豆包
              <span class="text-sm font-normal text-muted">doubao-seed-1-8-251228</span>
            </h3>
            <div class="flex gap-2">
              <button
                type="button"
                data-action="click->articles#saveResponse"
                data-provider="doubao"
                data-articles-target="saveButtonDoubao"
                class="btn-success btn-sm"
                style="display: none;"
              >
                <%= lucide_icon "save", class: "w-4 h-4 inline-block mr-1" %>
                保存
              </button>
              <button
                type="button"
                data-action="click->articles#copyResponseHtml"
                data-provider="doubao"
                data-articles-target="copyHtmlButtonDoubao"
                class="btn-primary btn-sm"
                style="display: none;"
              >
                <%= lucide_icon "copy", class: "w-4 h-4 inline-block mr-1" %>
                复制
              </button>
              <button
                type="button"
                data-action="click->articles#copyResponseMarkdown"
                data-provider="doubao"
                data-articles-target="copyMarkdownButtonDoubao"
                class="btn-outline btn-sm"
                style="display: none;"
              >
                <%= lucide_icon "file-code", class: "w-4 h-4 inline-block mr-1" %>
                复制Markdown
              </button>

            </div>
          </div>
          <div class="card-body">
            <div 
              data-articles-target="responseDoubao"
              class="text-secondary text-base leading-relaxed prose prose-sm max-w-none dark:prose-invert p-4 rounded-none min-h-[150px] max-h-[400px] overflow-y-auto"
            >
              <div class="flex items-center gap-2 text-muted">
                <div class="loading-spinner w-4 h-4"></div>
                <span>豆包思考中...</span>
              </div>
            </div>
            <textarea
              data-articles-target="responseDoubaoEdit"
              class="w-full px-4 py-3 text-base border-2 border-border rounded-none focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all resize-none text-foreground bg-surface"
              rows="15"
              style="display: none;"
            ></textarea>
          </div>
        </div>
      </div>



      <!-- Step 3: Drafts (5 models) -->
      <div data-articles-target="draftsContainer" style="display: none;" class="mt-8">
        <h2 class="text-2xl font-bold text-primary mb-4 flex items-center gap-2">
          <div class="w-1 h-6 bg-orange-500"></div>
          步骤 3：初稿生成结果
        </h2>
        
        <div class="grid md:grid-cols-1 gap-4">
          <!-- Grok Draft -->
          <div class="card card-elevated p-5 rounded-none">
            <div class="flex items-center justify-between mb-3">
              <h3 class="font-bold text-primary flex items-center gap-2">
                <%= image_tag "grok-logo.png", class: "w-5 h-5", alt: "Grok" %>
                Grok 初稿
              </h3>
              <div class="flex items-center gap-3">
                <span class="text-sm text-muted" data-articles-target="draftCharCountGrok">
                  字数：<span class="font-semibold text-primary">0</span>
                </span>
                <div class="flex gap-2">
                  <button
                    type="button"
                    data-action="click->articles#editDraft"
                    data-provider="grok"
                    data-articles-target="editDraftButtonGrok"
                    class="btn-secondary btn-sm"
                    style="display: none;"
                  >
                    <%= lucide_icon "edit", class: "w-4 h-4 inline-block mr-1" %>
                    编辑
                  </button>
                  <button
                    type="button"
                    data-action="click->articles#saveDraft"
                    data-provider="grok"
                    data-articles-target="saveDraftButtonGrok"
                    class="btn-success btn-sm"
                    style="display: none;"
                  >
                    <%= lucide_icon "save", class: "w-4 h-4 inline-block mr-1" %>
                    保存
                  </button>
                  <button
                    type="button"
                    data-action="click->articles#copyDraftHtml"
                    data-provider="grok"
                    data-articles-target="copyDraftHtmlButtonGrok"
                    class="btn-primary btn-sm"
                    style="display: none;"
                  >
                    <%= lucide_icon "copy", class: "w-4 h-4 inline-block mr-1" %>
                    复制
                  </button>
                  <button
                    type="button"
                    data-action="click->articles#copyDraftMarkdown"
                    data-provider="grok"
                    data-articles-target="copyDraftMarkdownButtonGrok"
                    class="btn-outline btn-sm"
                    style="display: none;"
                  >
                    <%= lucide_icon "file-code", class: "w-4 h-4 inline-block mr-1" %>
                    复制Markdown
                  </button>
                </div>
              </div>
            </div>
            <div 
              data-articles-target="draftGrok"
              class="text-secondary text-base leading-relaxed prose prose-sm max-w-none dark:prose-invert p-4 rounded-none min-h-[150px] max-h-[400px] overflow-y-auto"
            >
              <p class="text-muted">初稿生成中...</p>
            </div>
            <textarea
              data-articles-target="draftGrokEdit"
              class="w-full px-4 py-3 text-base border-2 border-border rounded-none focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all resize-none text-foreground bg-surface"
              rows="15"
              style="display: none;"
            ></textarea>
          </div>
          
          <!-- Qwen Draft -->
          <div class="card card-elevated p-5 rounded-none">
            <div class="flex items-center justify-between mb-3">
              <h3 class="font-bold text-primary flex items-center gap-2">
                <%= image_tag "qwen-logo.png", class: "w-5 h-5", alt: "千问" %>
                千问初稿
              </h3>
              <div class="flex items-center gap-3">
                <span class="text-sm text-muted" data-articles-target="draftCharCountQwen">
                  字数：<span class="font-semibold text-primary">0</span>
                </span>
                <div class="flex gap-2">
                  <button
                    type="button"
                    data-action="click->articles#editDraft"
                    data-provider="qwen"
                    data-articles-target="editDraftButtonQwen"
                    class="btn-secondary btn-sm"
                    style="display: none;"
                  >
                    <%= lucide_icon "edit", class: "w-4 h-4 inline-block mr-1" %>
                    编辑
                  </button>
                  <button
                    type="button"
                    data-action="click->articles#saveDraft"
                    data-provider="qwen"
                    data-articles-target="saveDraftButtonQwen"
                    class="btn-success btn-sm"
                    style="display: none;"
                  >
                    <%= lucide_icon "save", class: "w-4 h-4 inline-block mr-1" %>
                    保存
                  </button>
                  <button
                    type="button"
                    data-action="click->articles#copyDraftHtml"
                    data-provider="qwen"
                    data-articles-target="copyDraftHtmlButtonQwen"
                    class="btn-primary btn-sm"
                    style="display: none;"
                  >
                    <%= lucide_icon "copy", class: "w-4 h-4 inline-block mr-1" %>
                    复制
                  </button>
                  <button
                    type="button"
                    data-action="click->articles#copyDraftMarkdown"
                    data-provider="qwen"
                    data-articles-target="copyDraftMarkdownButtonQwen"
                    class="btn-outline btn-sm"
                    style="display: none;"
                  >
                    <%= lucide_icon "file-code", class: "w-4 h-4 inline-block mr-1" %>
                    复制Markdown
                  </button>
                </div>
              </div>
            </div>
            <div 
              data-articles-target="draftQwen"
              class="text-secondary text-base leading-relaxed prose prose-sm max-w-none dark:prose-invert p-4 rounded-none min-h-[150px] max-h-[400px] overflow-y-auto"
            >
              <p class="text-muted">初稿生成中...</p>
            </div>
            <textarea
              data-articles-target="draftQwenEdit"
              class="w-full px-4 py-3 text-base border-2 border-border rounded-none focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all resize-none text-foreground bg-surface"
              rows="15"
              style="display: none;"
            ></textarea>
          </div>
          
          <!-- DeepSeek Draft -->
          <div class="card card-elevated p-5 rounded-none">
            <div class="flex items-center justify-between mb-3">
              <h3 class="font-bold text-primary flex items-center gap-2">
                <%= image_tag "deepseek-logo.png", class: "w-5 h-5", alt: "DeepSeek" %>
                DeepSeek 初稿
              </h3>
              <div class="flex items-center gap-3">
                <span class="text-sm text-muted" data-articles-target="draftCharCountDeepseek">
                  字数：<span class="font-semibold text-primary">0</span>
                </span>
                <div class="flex gap-2">
                  <button
                    type="button"
                    data-action="click->articles#editDraft"
                    data-provider="deepseek"
                    data-articles-target="editDraftButtonDeepseek"
                    class="btn-secondary btn-sm"
                    style="display: none;"
                  >
                    <%= lucide_icon "edit", class: "w-4 h-4 inline-block mr-1" %>
                    编辑
                  </button>
                  <button
                    type="button"
                    data-action="click->articles#saveDraft"
                    data-provider="deepseek"
                    data-articles-target="saveDraftButtonDeepseek"
                    class="btn-success btn-sm"
                    style="display: none;"
                  >
                    <%= lucide_icon "save", class: "w-4 h-4 inline-block mr-1" %>
                    保存
                  </button>
                  <button
                    type="button"
                    data-action="click->articles#copyDraftHtml"
                    data-provider="deepseek"
                    data-articles-target="copyDraftHtmlButtonDeepseek"
                    class="btn-primary btn-sm"
                    style="display: none;"
                  >
                    <%= lucide_icon "copy", class: "w-4 h-4 inline-block mr-1" %>
                    复制
                  </button>
                  <button
                    type="button"
                    data-action="click->articles#copyDraftMarkdown"
                    data-provider="deepseek"
                    data-articles-target="copyDraftMarkdownButtonDeepseek"
                    class="btn-outline btn-sm"
                    style="display: none;"
                  >
                    <%= lucide_icon "file-code", class: "w-4 h-4 inline-block mr-1" %>
                    复制Markdown
                  </button>
                </div>
              </div>
            </div>
            <div 
              data-articles-target="draftDeepseek"
              class="text-secondary text-base leading-relaxed prose prose-sm max-w-none dark:prose-invert p-4 rounded-none min-h-[150px] max-h-[400px] overflow-y-auto"
            >
              <p class="text-muted">初稿生成中...</p>
            </div>
            <textarea
              data-articles-target="draftDeepseekEdit"
              class="w-full px-4 py-3 text-base border-2 border-border rounded-none focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all resize-none text-foreground bg-surface"
              rows="15"
              style="display: none;"
            ></textarea>
          </div>
          
          <!-- Gemini Draft -->
          <div class="card card-elevated p-5 rounded-none">
            <div class="flex items-center justify-between mb-3">
              <h3 class="font-bold text-primary flex items-center gap-2">
                <%= image_tag "gemini-logo.png", class: "w-5 h-5", alt: "Gemini" %>
                Gemini 初稿
              </h3>
              <div class="flex items-center gap-3">
                <span class="text-sm text-muted" data-articles-target="draftCharCountGemini">
                  字数：<span class="font-semibold text-primary">0</span>
                </span>
                <div class="flex gap-2">
                  <button
                    type="button"
                    data-action="click->articles#editDraft"
                    data-provider="gemini"
                    data-articles-target="editDraftButtonGemini"
                    class="btn-secondary btn-sm"
                    style="display: none;"
                  >
                    <%= lucide_icon "edit", class: "w-4 h-4 inline-block mr-1" %>
                    编辑
                  </button>
                  <button
                    type="button"
                    data-action="click->articles#saveDraft"
                    data-provider="gemini"
                    data-articles-target="saveDraftButtonGemini"
                    class="btn-success btn-sm"
                    style="display: none;"
                  >
                    <%= lucide_icon "save", class: "w-4 h-4 inline-block mr-1" %>
                    保存
                  </button>
                  <button
                    type="button"
                    data-action="click->articles#copyDraftHtml"
                    data-provider="gemini"
                    data-articles-target="copyDraftHtmlButtonGemini"
                    class="btn-primary btn-sm"
                    style="display: none;"
                  >
                    <%= lucide_icon "copy", class: "w-4 h-4 inline-block mr-1" %>
                    复制
                  </button>
                  <button
                    type="button"
                    data-action="click->articles#copyDraftMarkdown"
                    data-provider="gemini"
                    data-articles-target="copyDraftMarkdownButtonGemini"
                    class="btn-outline btn-sm"
                    style="display: none;"
                  >
                    <%= lucide_icon "file-code", class: "w-4 h-4 inline-block mr-1" %>
                    复制Markdown
                  </button>
                </div>
              </div>
            </div>
            <div 
              data-articles-target="draftGemini"
              class="text-secondary text-base leading-relaxed prose prose-sm max-w-none dark:prose-invert p-4 rounded-none min-h-[150px] max-h-[400px] overflow-y-auto"
            >
              <p class="text-muted">初稿生成中...</p>
            </div>
            <textarea
              data-articles-target="draftGeminiEdit"
              class="w-full px-4 py-3 text-base border-2 border-border rounded-none focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all resize-none text-foreground bg-surface"
              rows="15"
              style="display: none;"
            ></textarea>
          </div>
          
          <!-- Doubao Draft -->
          <div class="card card-elevated p-5 rounded-none">
            <div class="flex items-center justify-between mb-3">
              <h3 class="font-bold text-primary flex items-center gap-2">
                <%= image_tag "doubao-logo.png", class: "w-5 h-5", alt: "豆包" %>
                豆包初稿
              </h3>
              <div class="flex items-center gap-3">
                <span class="text-sm text-muted" data-articles-target="draftCharCountDoubao">
                  字数：<span class="font-semibold text-primary">0</span>
                </span>
                <div class="flex gap-2">
                  <button
                    type="button"
                    data-action="click->articles#editDraft"
                    data-provider="doubao"
                    data-articles-target="editDraftButtonDoubao"
                    class="btn-secondary btn-sm"
                    style="display: none;"
                  >
                    <%= lucide_icon "edit", class: "w-4 h-4 inline-block mr-1" %>
                    编辑
                  </button>
                  <button
                    type="button"
                    data-action="click->articles#saveDraft"
                    data-provider="doubao"
                    data-articles-target="saveDraftButtonDoubao"
                    class="btn-success btn-sm"
                    style="display: none;"
                  >
                    <%= lucide_icon "save", class: "w-4 h-4 inline-block mr-1" %>
                    保存
                  </button>
                  <button
                    type="button"
                    data-action="click->articles#copyDraftHtml"
                    data-provider="doubao"
                    data-articles-target="copyDraftHtmlButtonDoubao"
                    class="btn-primary btn-sm"
                    style="display: none;"
                  >
                    <%= lucide_icon "copy", class: "w-4 h-4 inline-block mr-1" %>
                    复制
                  </button>
                  <button
                    type="button"
                    data-action="click->articles#copyDraftMarkdown"
                    data-provider="doubao"
                    data-articles-target="copyDraftMarkdownButtonDoubao"
                    class="btn-outline btn-sm"
                    style="display: none;"
                  >
                    <%= lucide_icon "file-code", class: "w-4 h-4 inline-block mr-1" %>
                    复制Markdown
                  </button>
                </div>
              </div>
            </div>
            <div 
              data-articles-target="draftDoubao"
              class="text-secondary text-base leading-relaxed prose prose-sm max-w-none dark:prose-invert p-4 rounded-none min-h-[150px] max-h-[400px] overflow-y-auto"
            >
              <p class="text-muted">初稿生成中...</p>
            </div>
            <textarea
              data-articles-target="draftDoubaoEdit"
              class="w-full px-4 py-3 text-base border-2 border-border rounded-none focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all resize-none text-foreground bg-surface"
              rows="15"
              style="display: none;"
            ></textarea>
          </div>
        </div>
      </div>

      <!-- Step 3: 27 Titles Generation Section -->
      <div id="step-3-titles" style="display: none;" class="mt-8">
        <div class="card card-elevated p-6 rounded-none">
          <h2 class="text-2xl font-bold text-primary mb-6 flex items-center gap-2">
            <div class="w-1 h-6 bg-orange-500"></div>
            步骤 4：生成27种标题
          </h2>

          <!-- Draft Source Selector -->
          <div class="mb-6">
            <label class="block text-sm font-medium text-foreground mb-3">
              选择初稿来源：
            </label>
            <div class="flex flex-wrap gap-4">
              <label class="flex items-center gap-2 cursor-pointer">
                <input type="radio" name="draft-source" value="grok" class="w-4 h-4 text-primary">
                <span class="text-foreground">Grok</span>
              </label>
              <label class="flex items-center gap-2 cursor-pointer">
                <input type="radio" name="draft-source" value="qwen" class="w-4 h-4 text-primary">
                <span class="text-foreground">千问</span>
              </label>
              <label class="flex items-center gap-2 cursor-pointer">
                <input type="radio" name="draft-source" value="deepseek" class="w-4 h-4 text-primary">
                <span class="text-foreground">DeepSeek</span>
              </label>
              <label class="flex items-center gap-2 cursor-pointer">
                <input type="radio" name="draft-source" value="gemini" class="w-4 h-4 text-primary">
                <span class="text-foreground">Gemini</span>
              </label>
              <label class="flex items-center gap-2 cursor-pointer">
                <input type="radio" name="draft-source" value="doubao" class="w-4 h-4 text-primary">
                <span class="text-foreground">豆包</span>
              </label>
            </div>
          </div>

          <!-- Generate Button -->
          <button
            type="button"
            data-action="click->articles#generate27Titles"
            class="btn-primary mb-6"
          >
            <%= lucide_icon "wand-2", class: "w-5 h-5 inline-block mr-2" %>
            生成27种标题
          </button>

          <!-- Loading State -->
          <div id="titles-27-loading" style="display: none;" class="flex items-center gap-3 p-6 bg-primary/5 rounded-none mb-6">
            <div class="loading-spinner w-6 h-6"></div>
            <span class="text-primary font-medium">AI正在使用林桂枝的27种文案方法生成标题...</span>
          </div>

          <!-- Results Container -->
          <div class="border-2 border-border rounded-none p-6">
            <div class="mb-4">
              <h3 class="font-bold text-primary flex items-center gap-2">
                <%= lucide_icon "list", class: "w-5 h-5" %>
                生成结果
              </h3>
            </div>
            <div 
              id="titles-27-result"
              class="text-secondary text-base leading-relaxed prose prose-sm max-w-none dark:prose-invert min-h-[200px] max-h-[600px] overflow-y-auto"
            >
              <p class="text-muted">请先选择初稿来源并点击"生成27种标题"按钮</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Usage Guide Section -->
      <div class="mt-12 mb-8">
        <div class="card card-elevated p-6 rounded-none bg-gradient-to-br from-primary/5 to-secondary/5">
          <div class="flex items-center justify-center gap-4 flex-wrap">
            <div class="flex items-center gap-2">
              <div class="w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center font-bold">
                1
              </div>
              <span class="text-primary font-semibold">5选1挑选初稿</span>
            </div>
            <%= lucide_icon "arrow-right", class: "w-5 h-5 text-primary hidden sm:block" %>
            <div class="flex items-center gap-2">
              <div class="w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center font-bold">
                2
              </div>
              <span class="text-primary font-semibold">编辑并复制Markdown</span>
            </div>
            <%= lucide_icon "arrow-right", class: "w-5 h-5 text-primary hidden sm:block" %>
            <div class="flex items-center gap-2">
              <div class="w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center font-bold">
                3
              </div>
              <span class="text-primary font-semibold">
                前往 <a href="https://hongzhong.app" target="_blank" class="hover:underline">hongzhong.app</a> 排版发布
              </span>
            </div>
          </div>
        </div>
      </div>

      <!-- History Sidebar -->
      <div 
        data-articles-target="historyOverlay"
        class="fixed inset-0 bg-black/50 z-50 transition-opacity duration-300"
        style="display: none; opacity: 0;"
        data-action="click->articles#closeHistory"
      ></div>

      <div 
        data-articles-target="historySidebar"
        class="fixed top-0 right-0 h-full w-full md:w-96 bg-surface shadow-2xl z-50 transform transition-transform duration-300"
        style="display: none; transform: translateX(100%);"
      >
        <!-- Sidebar Header -->
        <div class="flex items-center justify-between p-6 border-b border-border">
          <h2 class="text-2xl font-bold text-primary flex items-center gap-2">
            <%= lucide_icon "history", class: "w-6 h-6" %>
            历史文章
          </h2>
          <button
            type="button"
            data-action="click->articles#closeHistory"
            class="btn-secondary btn-sm"
          >
            <%= lucide_icon "x", class: "w-5 h-5" %>
          </button>
        </div>
        
        <!-- Sidebar Content -->
        <div class="overflow-y-auto h-[calc(100%-160px)]">
          <div data-articles-target="historyList" class="p-4">
            <div class="flex items-center justify-center py-12 text-muted">
              <div class="loading-spinner w-6 h-6 mr-2"></div>
              加载中...
            </div>
          </div>
        </div>

        <!-- Sidebar Footer -->


      </div>
    </div>


  </div>
</div>

<style>
  /* Recording animation */
  [data-voice-recorder-target="micButton"].recording {
    animation: pulse 1.5s ease-in-out infinite;
    background: hsl(var(--color-danger));
  }

  @keyframes pulse {
    0%, 100% {
      transform: scale(1);
      box-shadow: 0 0 0 0 hsl(var(--color-danger) / 0.7);
    }
    50% {
      transform: scale(1.05);
      box-shadow: 0 0 0 20px hsl(var(--color-danger) / 0);
    }
  }

  /* Loading spinner */
  .loading-spinner {
    border: 2px solid hsl(var(--color-border));
    border-top-color: hsl(var(--color-primary));
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }

  @keyframes spin {
    to { transform: rotate(360deg); }
  }
</style>
